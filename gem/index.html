<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Media Player OS</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <!-- Background Layer -->
    <div class="bg-layer" id="bg-layer"></div>
    <div class="bg-overlay"></div>

    <div class="app-container glass-panel">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="brand"><span class="material-icons">album</span> MediaOS</div>
            <button class="nav-btn active" data-tab="player"><span class="material-icons">play_circle</span> Player</button>
            <button class="nav-btn" data-tab="queue"><span class="material-icons">queue_music</span> Queue</button>
            <button class="nav-btn" data-tab="library"><span class="material-icons">library_music</span> Library</button>
            <button class="nav-btn" data-tab="youtube"><span class="material-icons">smart_display</span> YouTube</button>
            <div class="spacer"></div>
            <button class="nav-btn" data-tab="settings"><span class="material-icons">settings</span> Settings</button>
        </nav>

        <!-- Main Content -->
        <main class="content-area">
            
            <!-- Player Tab -->
            <section id="tab-player" class="tab-content active">
                <div class="player-visuals">
                    <div class="media-wrapper">
                        <!-- 1. Audio Art -->
                        <img id="album-art" src="assets/placeholder.png" class="media-layer active">
                        
                        <!-- 2. Local Video Player -->
                        <video id="local-video" class="media-layer" playsinline></video>
                        
                        <!-- 3. YouTube Iframe -->
                        <div id="yt-player-placeholder" class="media-layer"></div>
                    </div>

                    <canvas id="visualizer"></canvas>
                    
                    <div class="track-info-large">
                        <h1 id="track-title">Ready</h1>
                        <h3 id="track-artist">Select media to begin</h3>
                    </div>
                </div>
            </section>

            <!-- YouTube Tab (Updated) -->
            <section id="tab-youtube" class="tab-content">
                <div class="yt-container">
                    <h2>YouTube Stream</h2>
                    <div class="yt-search-box">
                        <input type="text" id="yt-input" placeholder="Paste YouTube URL (e.g., youtube.com/watch?v=...)">
                        <button class="btn-primary" id="btn-load-yt">Play</button>
                    </div>

                    <div class="yt-history-section">
                        <h3><span class="material-icons">history</span> Recent Links</h3>
                        <button class="btn-small-text" id="btn-clear-yt-history">Clear History</button>
                        <div id="yt-history-list" class="list-container">
                            <!-- History Items Injected Here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Queue Tab -->
            <section id="tab-queue" class="tab-content">
                <div class="header-row">
                    <h2>Current Queue</h2>
                    <button class="btn-small" id="btn-clear-queue">Clear</button>
                </div>
                <div id="queue-list" class="list-container"></div>
            </section>

            <!-- Library Tab -->
            <section id="tab-library" class="tab-content">
                <div class="toolbar">
                    <button class="btn-primary" id="btn-add-files"><span class="material-icons">add</span> Add Files</button>
                    <button class="btn-secondary" id="btn-delete-all"><span class="material-icons">delete_forever</span> Reset</button>
                    <input type="file" id="file-input" multiple hidden accept="audio/*,video/*">
                </div>
                <div id="library-list" class="list-container"></div>
            </section>

            <!-- Settings Tab -->
            <section id="tab-settings" class="tab-content">
                <h2>Preferences</h2>
                <div class="setting-item">
                    <label>Enable Visualizer</label>
                    <input type="checkbox" id="setting-vis" checked>
                </div>
            </section>
        </main>

        <!-- Player Bar -->
        <footer class="player-bar glass-panel">
            <div class="pb-info">
                <div class="scrolling-text" id="pb-title">Waiting...</div>
            </div>
            
            <div class="pb-controls">
                <div class="buttons">
                    <button class="icon-btn" id="btn-prev"><span class="material-icons">skip_previous</span></button>
                    <button class="fab-btn" id="btn-play"><span class="material-icons">play_arrow</span></button>
                    <button class="icon-btn" id="btn-next"><span class="material-icons">skip_next</span></button>
                </div>
                <div class="progress-wrap">
                    <span id="time-current">0:00</span>
                    <input type="range" id="seek-bar" value="0" step="0.1">
                    <span id="time-total">0:00</span>
                </div>
            </div>

            <div class="pb-volume">
                <!-- Video Extras -->
                <button class="icon-btn" id="btn-pip" title="Picture in Picture"><span class="material-icons">picture_in_picture_alt</span></button>
                <button class="icon-btn" id="btn-fullscreen" title="Fullscreen"><span class="material-icons">fullscreen</span></button>
                <div class="vol-sep"></div>
                <span class="material-icons">volume_up</span>
                <input type="range" id="volume-bar" value="1" max="1" step="0.05">
            </div>
        </footer>
    </div>

    <div id="toast-container"></div>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script type="module" src="main.js"></script>
</body>
</html>